---
title: sample_bsdf
order: 18
category:
  - houdini
---
    
## 描述

Samples a BSDF.

`void sample_bsdf(bsdf F, vector viewer_u, vector &dir, vector &eval, int &type, float sx, float sy, ...)`

`void sample_bsdf(bsdf F, vector viewer_u, vector &dir, vector &eval, int &type, float sx, float sy, int mask, ...)`

`void sample_bsdf(bsdf F, vector viewer_u, vector &dir, vector &eval, float &pdf, int &type, float sx, float sy, ...)`

`void sample_bsdf(bsdf F, vector viewer_u, vector &dir, vector &eval, float &pdf, int &type, float sx, float sy, int mask, ...)`

`void sample_bsdf(bsdf b, vector viewer_u, vector normal_v, int &flags, vector &dir, vector &eval, float &pdf, int &type, float sx, float sy, int mask, ...)`

`F`

The BSDF to sample.

要采样的 BSDF。

`viewer_u`

The U vector (input viewer direction).

U 向量（输入观察者方向）。

`normal_v`

The V vector (input surface normal).

V 向量（输入表面法线）。

`&flags`

A bitfield of flags for the BSDF, defined in `pbr.h`. The function may set
flags like

```c
PBR_BSDF_REVERSE
```

or

```c
PBR_BSDF_O_EVENT_EXIT
```

.

在 pbr.h 中定义的 BSDF 的标志的位域。该函数可以设置 PBR_BSDF_REVERSE 或 PBR_BSDF_O_EVENT_EXIT 等标志。

`&dir`

The function overwrites this variable with the outgoing ray direction.

该函数用出射光线的方向覆盖这个变量。

`&eval`

The function overwrites this variable with the outgoing ray color, scaled by
albedo.

该函数用出射光线的颜色来覆盖这个变量，并按反照率进行缩放。

This is not the same as the evaluated vector returned by the `eval_bsdf`
operation. Here, `&eval` will not vary with the outgoing sample direction.

这与 eval_bsdf 操作所返回的评估向量不一样。在这里，&eval 不会随出射方向的不同而变化。

`&pdf`

The function overwrites this variable with the computed PDF of the BSDF.

该函数用计算出的 BSDF 的 PDF 覆盖这个变量。

`&type`

In a compound BSDF, this returns the bounce type that was sampled.

在一个复合 BSDF 中，它返回被采样的反弹类型。

See [bouncemask](bouncemask.html) for information on component label bitmasks.

关于组件标签位掩码的信息，请参见 bouncemask。

`sx` and `sy`

Random values, such as generated by [nextsample](nextsample.html). Different
values of `sx` and `sy` represent different random directions to sample.

随机值，例如由 nextsample 生成的。不同的 sx 和 y 的值代表了不同的随机采样方向。

`&eval`

Overwritten with the color, scaled by albedo, of the sampled component.

覆盖的是被采样组分的颜色，按反照率缩放。

`&pdf`

The sampling pdf for the sampled component.

采样组件的采样 pdf。

`bounces`

A bitmask representing bounce types allowed.

一个比特掩码，代表允许的弹跳类型。

The `sample_bsdf` function passes keyword arguments to the BSDF
beingevaluated.For custom BSDFs these keyword arguments are bound to
shaderarguments (e.g. indicating whether the BSDF is being evaluated for
direct orindirect illumination).It‘salso possible for a BSDF to pass
information backto `sample_bsdf`.To indicate that a keyword argument value
should be importedfrom the BSDF prefix the keyword with “import:”.For example:

sample_bsdffunction 将关键字参数传递给被评估的 BSDF。

## Examples

    sample_bsdf(F, inI, outI, eval, type, sx, sy,  "direct", 0,            // Specify indirect illumination  "import:sssmfp", sssmfp,    // Read the exported sssmfp parameter  ...);
