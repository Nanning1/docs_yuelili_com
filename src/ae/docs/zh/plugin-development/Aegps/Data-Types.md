---
title: Data Types
order: 4
category:
  - AE 插件开发
---
# Data Types

只要有可能，After Effects就会为插件提供不透明的数据类型，并提供操作这些数据的访问函数。例如，视频帧用不透明的AEGP_WorldH表示。虽然在某些情况下，简单地修改底层结构可能更有效，但通过保持数据类型的不透明性，我们允许改变我们的实现，而不会让你重新编译（和重新发布）你的插件。

## AEGP API Data Types

| **Type**               | **Describes**                                                                                                                                                                                                                                                                                                                                              | **Manage Using**                                                                                                                                                                                                                                                                                                                                   |
| ---------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `AEGP_MemHandle`           | This structure contains more than just the referenced memory. So it should not be dereferenced directly. Use AEGP_LockMemHandle ` in the AEGP Memory Suite to get a pointer to the memory referenced by the AEGP_MemHandle`. And of course, unlock it when you’re done.                                                                                       | [AEGP Memory Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-memory-suite)                                                                                                                                                                                                                                              |
| `AEGP_ProjectH`            | The current After Effects project. Projects are a set of elements arranged hierarchically in a tree to preserve semantic relationships. Interior nodes of the tree are folders. As of CS6, there will only ever be one open project.                                                                                                                             | [AEGP Project Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-project-suite)                                                                                                                                                                                                                                            |
| `AEGP_ItemH`               | An abstraction describing any element of a project, including folders. An item is anything that can be selected. Since multiple object types can be selected, we treat them as AEGP_ItemHs until more specificity is required.                                                                                                                                   | [AEGP Item Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-item-suite)                                                                                                                                                                                                                                                  |
| `AEGP_Collection2H`        | A set of selected items.                                                                                                                                                                                                                                                                                                                                         | [AEGP Collection Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-collection-suite)                                                                                                                                                                                                                                      |
| `AEGP_CompH`               | A composition is a sequence of renderable items that, together, produce output. A composition exists over a time interval. Multiple compositions can exist within one project.                                                                                                                                                                                   | [AEGP Composition Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-composition-suite)                                                                                                                                                                                                                                    |
| `AEGP_FootageH`            | An item that can be rendered. Folders and compositions are the only items that are not footage.                                                                                                                                                                                                                                                                  | [AEGP Footage Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-footage-suite)                                                                                                                                                                                                                                            |
| `AEGP_LayerH`              | An element of a composition. Layers are rendered in sequence, which allows for occlusions. Solids, text, paint, cameras, lights, images, and image sequences are all represented as layers.Layers may be defined over sub-intervals of the composition’s time interval.                                                                                         | [AEGP Layer Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-layer-suite)                                                                                                                                                                                                                                                |
| `AEGP_WorldH`              | A frame of pixels.                                                                                                                                                                                                                                                                                                                                               | [AEGP World Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-world-suite)                                                                                                                                                                                                                                                |
| `AEGP_EffectRefH`          | An effect applied to a layer. An effect is a function that takes as its argument a layer (and possibly other parameters) and returns an altered version of the layer for rendering.                                                                                                                                                                              | [AEGP Effect Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-effect-suite)                                                                                                                                                                                                                                              |
| `AEGP_StreamRefH`          | Any[parameter stream](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-diving-into-streams) attached to a layer, in a composition. See the description of AEGP_GetNewLayerStream` from [AEGP_StreamSuite5](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-aegp-streamsuite) for a full list of stream types. | [AEGP Stream Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-stream-suite), [AEGP Dynamic Stream Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-dynamic-stream-suite) [AEGP Keyframe Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-keyframe-suite) |
| `AEGP_MaskRefH`            | A mask applied to a layer. An AEGP_MaskRefH is used to access details about the mask stream, not the specific points which constitute the mask. A mask is a rasterized path (sequence of vertices) that partitions a layer into two pieces, allowing each to be rendered differently.                                                                            | [AEGP Mask Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-mask-suite)                                                                                                                                                                                                                                                  |
| `AEGP_MaskOutlineValH`     | The specific points which constitute the mask. The points in a mask outline are ordered, and the mask need not be closed.                                                                                                                                                                                                                                        | [AEGP Mask Outline Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-mask-outline-suite)                                                                                                                                                                                                                                  |
| `AEGP_TextDocumentH`       | Represents the actual text associated with a text layer.                                                                                                                                                                                                                                                                                                         | [AEGP Text Document Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-text-document-suite)                                                                                                                                                                                                                                |
| `AEGP_TextOutlinesH`       | A reference to all the paths that make up the outlines of a given text layer.                                                                                                                                                                                                                                                                                    | [AEGP Text Layer Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-text-layer-suite)                                                                                                                                                                                                                                      |
| `AEGP_MarkerVal`           | The data associated with a given timeline marker.                                                                                                                                                                                                                                                                                                                | [AEGP Marker Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-marker-suite)                                                                                                                                                                                                                                              |
| `AEGP_PersistentBlobH`     | A “blob” of data containing the current preferences.                                                                                                                                                                                                                                                                                                           | [AEGP Persistent Data Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-persistent-data-suite)                                                                                                                                                                                                                            |
| `AEGP_RenderOptionsH`      | The settings associated with a render request.                                                                                                                                                                                                                                                                                                                   | [AEGP Render Options Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-render-options-suite)                                                                                                                                                                                                                              |
| `AEGP_LayerRenderOptionsH` | The settings associated with a layer render request.                                                                                                                                                                                                                                                                                                             | [AEGP Layer Render Options Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-aegp-layerrenderoptionssuite)                                                                                                                                                                                                                |
| `AEGP_FrameReceiptH`       | A reference to a rendered frame.                                                                                                                                                                                                                                                                                                                                 | [AEGP Render Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-render-suite)                                                                                                                                                                                                                                              |
| `AEGP_RQItemRefH`          | An item in the render queue.                                                                                                                                                                                                                                                                                                                                     | [AEGP Render Queue Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-render-queue-suite) [AEGP Render Queue Item Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-render-queue-item-suite)                                                                                                |
| `AEGP_OutputModuleRefH`    | An output module, attached to a specific AEGP_RQItemRef in the render queue.                                                                                                                                                                                                                                                                                     | [AEGP Output Module Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-output-module-suite)                                                                                                                                                                                                                                |
| `AEGP_SoundDataH`          | The[audio settings](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-sound-data-suite) used for a given layer.                                                                                                                                                                                                                          | [AEGP Sound Data Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-sound-data-suite)                                                                                                                                                                                                                                      |
| `AEGP_RenderLayerContextH` | State information at the time of a render request, sent to an Artisan by After Effects.                                                                                                                                                                                                                                                                          | [AEGP Canvas Suite](https://ae-plugins.docsforadobe.dev/artisans/artisan-data-types.html#artisans-artisan-data-types-aegp-canvassuite)                                                                                                                                                                                                                      |
| `AEGP_RenderReceiptH`      | Used by Artisans when rendering.                                                                                                                                                                                                                                                                                                                                 | [AEGP Canvas Suite](https://ae-plugins.docsforadobe.dev/artisans/artisan-data-types.html#artisans-artisan-data-types-aegp-canvassuite)                                                                                                                                                                                                                      |

## Nasty, Brutish, and Short

关于层、流和许多其他项目的信息不会存活很久；它经常被用户活动所废止。

任何修改项目数量（而不是质量）的行为都会使对这些项目的引用失效；向流添加关键帧会使对该流的引用失效，但强制渲染一个图层并不会使对它的引用失效。不要缓存图层像素。

不建议在调用插件中的特定钩子函数之间缓存引用；当你需要时获取信息，并尽快忘记（释放）它。

## Were You Just Going To Leave That Data Lying Around?

当你要求After Effects填充和返回数据结构的句柄时，重要的是你要自己清理。对于以下数据类型，你必须调用相应的处理程序。

## Data Types Requiring Disposal

| **Data Type**          | **Disposal function**                                                                                                                                                                                                                                                                                                                                   |
| ---------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `AEGP_Collection2H`        | AEGP_DisposeCollection`, from[AEGP_CollectionSuite2](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-aegp-collectionsuite)                                                                                                                                                                                                          |
| `AEGP_FootageH`            | AEGP_DisposeFootage`, from[AEGP_FootageSuite5](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-aegp-footagesuite)                                                                                                                                                                                                                   |
| `AEGP_WorldH`              | AEGP_Dispose `, from [AEGP_WorldSuite3](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-aegp-worldsuite)Or AEGP_DisposeTexture`, from [AEGP_CanvasSuite8](https://ae-plugins.docsforadobe.dev/artisans/artisan-data-types.html#artisans-artisan-data-types-aegp-canvassuite), if layer texture created using AEGP_RenderTexture`) |
| `AEGP_EffectRefH`          | AEGP_DisposeEffect`, from[AEGP_EffectSuite4](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-aegp-effectsuite)                                                                                                                                                                                                                      |
| `AEGP_MaskRefH`            | AEGP_DisposeMask`, from[AEGP_MaskSuite6](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-aegp-masksuite)                                                                                                                                                                                                                            |
| `AEGP_RenderOptionsH`      | AEGP_Dispose`, from[AEGP_RenderQueueMonitorSuite1](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-aegp-renderqueuemonitorsuite)                                                                                                                                                                                                    |
| `AEGP_LayerRenderOptionsH` | AEGP_Dispose`, from[AEGP_LayerRenderOptionsSuite1](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-aegp-layerrenderoptionssuite)                                                                                                                                                                                                    |
| `AEGP_RenderReceiptH`      | AEGP_DisposeRenderReceipt`, from[AEGP_CanvasSuite8](https://ae-plugins.docsforadobe.dev/artisans/artisan-data-types.html#artisans-artisan-data-types-aegp-canvassuite)                                                                                                                                                                                           |