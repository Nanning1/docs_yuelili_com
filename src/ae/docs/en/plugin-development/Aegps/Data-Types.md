---
title: Data Types
order: 4
category:
  - AE 插件开发
---
# Data Types

Whenever possible, After Effects presents plug-ins with opaque data types, and provides accessor functions for manipulating them. For example, video frames are represented using the opaque AEGP_WorldH. While in some cases it might be more efficient to simply modify the underlying structure, by maintaining the opaqueness of the data types we allow for changes to our implementation without making you recompile (and redistribute) your plug-ins.

---

## AEGP API Data Types



| **Type**                                        | **Describes**                                                                                                                                                                                                                                                                                                                                                                          | **Manage Using**                                                                                                                                                                                                                                                                                                                                   |
| ----------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `<span class="pre">AEGP_MemHandle</span>`           | This structure contains more than just the referenced memory. So it should not be dereferenced directly. Use `<span class="pre">AEGP_LockMemHandle</span>` in the AEGP Memory Suite to get a pointer to the memory referenced by the `<span class="pre">AEGP_MemHandle</span>`. And of course, unlock it when you’re done.                                                              | [AEGP Memory Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-memory-suite)                                                                                                                                                                                                                                              |
| `<span class="pre">AEGP_ProjectH</span>`            | The current After Effects project. Projects are a set of elements arranged hierarchically in a tree to preserve semantic relationships. Interior nodes of the tree are folders. As of CS6, there will only ever be one open project.                                                                                                                                                         | [AEGP Project Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-project-suite)                                                                                                                                                                                                                                            |
| `<span class="pre">AEGP_ItemH</span>`               | An abstraction describing any element of a project, including folders. An item is anything that can be selected. Since multiple object types can be selected, we treat them as AEGP_ItemHs until more specificity is required.                                                                                                                                                               | [AEGP Item Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-item-suite)                                                                                                                                                                                                                                                  |
| `<span class="pre">AEGP_Collection2H</span>`        | A set of selected items.                                                                                                                                                                                                                                                                                                                                                                     | [AEGP Collection Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-collection-suite)                                                                                                                                                                                                                                      |
| `<span class="pre">AEGP_CompH</span>`               | A composition is a sequence of renderable items that, together, produce output. A composition exists over a time interval. Multiple compositions can exist within one project.                                                                                                                                                                                                               | [AEGP Composition Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-composition-suite)                                                                                                                                                                                                                                    |
| `<span class="pre">AEGP_FootageH</span>`            | An item that can be rendered. Folders and compositions are the only items that are not footage.                                                                                                                                                                                                                                                                                              | [AEGP Footage Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-footage-suite)                                                                                                                                                                                                                                            |
| `<span class="pre">AEGP_LayerH</span>`              | An element of a composition. Layers are rendered in sequence, which allows for occlusions. Solids, text, paint, cameras, lights, images, and image sequences are all represented as layers.Layers may be defined over sub-intervals of the composition’s time interval.                                                                                                                     | [AEGP Layer Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-layer-suite)                                                                                                                                                                                                                                                |
| `<span class="pre">AEGP_WorldH</span>`              | A frame of pixels.                                                                                                                                                                                                                                                                                                                                                                           | [AEGP World Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-world-suite)                                                                                                                                                                                                                                                |
| `<span class="pre">AEGP_EffectRefH</span>`          | An effect applied to a layer. An effect is a function that takes as its argument a layer (and possibly other parameters) and returns an altered version of the layer for rendering.                                                                                                                                                                                                          | [AEGP Effect Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-effect-suite)                                                                                                                                                                                                                                              |
| `<span class="pre">AEGP_StreamRefH</span>`          | Any[parameter stream](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-diving-into-streams) attached to a layer, in a composition. See the description of `<span class="pre">AEGP_GetNewLayerStream</span>` from [AEGP_StreamSuite5](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-aegp-streamsuite) for a full list of stream types. | [AEGP Stream Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-stream-suite), [AEGP Dynamic Stream Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-dynamic-stream-suite) [AEGP Keyframe Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-keyframe-suite) |
| `<span class="pre">AEGP_MaskRefH</span>`            | A mask applied to a layer. An AEGP_MaskRefH is used to access details about the mask stream, not the specific points which constitute the mask. A mask is a rasterized path (sequence of vertices) that partitions a layer into two pieces, allowing each to be rendered differently.                                                                                                        | [AEGP Mask Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-mask-suite)                                                                                                                                                                                                                                                  |
| `<span class="pre">AEGP_MaskOutlineValH</span>`     | The specific points which constitute the mask. The points in a mask outline are ordered, and the mask need not be closed.                                                                                                                                                                                                                                                                    | [AEGP Mask Outline Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-mask-outline-suite)                                                                                                                                                                                                                                  |
| `<span class="pre">AEGP_TextDocumentH</span>`       | Represents the actual text associated with a text layer.                                                                                                                                                                                                                                                                                                                                     | [AEGP Text Document Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-text-document-suite)                                                                                                                                                                                                                                |
| `<span class="pre">AEGP_TextOutlinesH</span>`       | A reference to all the paths that make up the outlines of a given text layer.                                                                                                                                                                                                                                                                                                                | [AEGP Text Layer Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-text-layer-suite)                                                                                                                                                                                                                                      |
| `<span class="pre">AEGP_MarkerVal</span>`           | The data associated with a given timeline marker.                                                                                                                                                                                                                                                                                                                                            | [AEGP Marker Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-marker-suite)                                                                                                                                                                                                                                              |
| `<span class="pre">AEGP_PersistentBlobH</span>`     | A “blob” of data containing the current preferences.                                                                                                                                                                                                                                                                                                                                       | [AEGP Persistent Data Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-persistent-data-suite)                                                                                                                                                                                                                            |
| `<span class="pre">AEGP_RenderOptionsH</span>`      | The settings associated with a render request.                                                                                                                                                                                                                                                                                                                                               | [AEGP Render Options Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-render-options-suite)                                                                                                                                                                                                                              |
| `<span class="pre">AEGP_LayerRenderOptionsH</span>` | The settings associated with a layer render request.                                                                                                                                                                                                                                                                                                                                         | [AEGP Layer Render Options Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-aegp-layerrenderoptionssuite)                                                                                                                                                                                                                |
| `<span class="pre">AEGP_FrameReceiptH</span>`       | A reference to a rendered frame.                                                                                                                                                                                                                                                                                                                                                             | [AEGP Render Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-render-suite)                                                                                                                                                                                                                                              |
| `<span class="pre">AEGP_RQItemRefH</span>`          | An item in the render queue.                                                                                                                                                                                                                                                                                                                                                                 | [AEGP Render Queue Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-render-queue-suite) [AEGP Render Queue Item Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-render-queue-item-suite)                                                                                                |
| `<span class="pre">AEGP_OutputModuleRefH</span>`    | An output module, attached to a specific AEGP_RQItemRef in the render queue.                                                                                                                                                                                                                                                                                                                 | [AEGP Output Module Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-output-module-suite)                                                                                                                                                                                                                                |
| `<span class="pre">AEGP_SoundDataH</span>`          | The[audio settings](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-sound-data-suite) used for a given layer.                                                                                                                                                                                                                                                      | [AEGP Sound Data Suite](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-sound-data-suite)                                                                                                                                                                                                                                      |
| `<span class="pre">AEGP_RenderLayerContextH</span>` | State information at the time of a render request, sent to an Artisan by After Effects.                                                                                                                                                                                                                                                                                                      | [AEGP Canvas Suite](https://ae-plugins.docsforadobe.dev/artisans/artisan-data-types.html#artisans-artisan-data-types-aegp-canvassuite)                                                                                                                                                                                                                      |
| `<span class="pre">AEGP_RenderReceiptH</span>`      | Used by Artisans when rendering.                                                                                                                                                                                                                                                                                                                                                             | [AEGP Canvas Suite](https://ae-plugins.docsforadobe.dev/artisans/artisan-data-types.html#artisans-artisan-data-types-aegp-canvassuite)                                                                                                                                                                                                                      |

---

## Nasty, Brutish, and Short

Information about layers, streams, and many other items doesn’t survive long; it’s often invalidated by user activity.

Anything that modifies the quantity (not quality) of items will invalidate references to those items; adding a keyframe to a stream invalidates references to that stream, but forcing a layer to be rendered doesn’t invalidate references to it. Do not cache layer pixels.

Caching references between calls to a specific hook function within your plug-in is not recommended; acquire information when you need it, and forget (release) it as soon as possible.

---

## Were You Just Going To Leave That Data Lying Around?

When you ask After Effects to populate and return handles to data structures, it’s important that you clean up after yourself. For the following data types, you must call the appropriate disposal routines.

---

## Data Types Requiring Disposal

| **Data Type**                                                                                                                                                                                                                       | **Disposal function**                                                                                                                                                                                                                                                                                                                                                                                                                 |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `<span class="pre">AEGP_Collection2H</span>`                                                                                                                                                                                            | `<span class="pre">AEGP_DisposeCollection</span>`, from [AEGP_CollectionSuite2](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-aegp-collectionsuite)                                                                                                                                                                                                                                                           |
| -                                                                                                                                                                                                                                         | -                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `<span class="pre">AEGP_FootageH</span>`                                                                                                                                                                                                | `<span class="pre">AEGP_DisposeFootage</span>`, from [AEGP_FootageSuite5](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-aegp-footagesuite)                                                                                                                                                                                                                                                                    |
| `<span class="pre">AEGP_WorldH</span>`                                                                                                                                                                                                  | `<span class="pre">AEGP_Dispose</span>`, from [AEGP_WorldSuite3](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-aegp-worldsuite)Or `<span class="pre">AEGP_DisposeTexture</span>`, from [AEGP_CanvasSuite8](https://ae-plugins.docsforadobe.dev/artisans/artisan-data-types.html#artisans-artisan-data-types-aegp-canvassuite), if layer texture created using `<span class="pre">AEGP_RenderTexture</span>`) |
| `<span class="pre">AEGP_EffectRefH</span>`                                                                                                                                                                                              | `<span class="pre">AEGP_DisposeEffect</span>`, from [AEGP_EffectSuite4](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-aegp-effectsuite)                                                                                                                                                                                                                                                                       |
| `<span class="pre">AEGP_MaskRefH</span>`                                                                                                                                                                                                | `<span class="pre">AEGP_DisposeMask</span>`, from [AEGP_MaskSuite6](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-aegp-masksuite)                                                                                                                                                                                                                                                                             |
| `<span class="pre">AEGP_RenderOptionsH</span>`                                                                                                                                                                                          | `<span class="pre">AEGP_Dispose</span>`, from [AEGP_RenderQueueMonitorSuite1](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-aegp-renderqueuemonitorsuite)                                                                                                                                                                                                                                                     |
| `<span class="pre">AEGP_LayerRenderOptionsH</span>`                                                                                                                                                                                     | `<span class="pre">AEGP_Dispose</span>`, from [AEGP_LayerRenderOptionsSuite1](https://ae-plugins.docsforadobe.dev/aegps/aegp-suites.html#aegps-aegp-suites-aegp-layerrenderoptionssuite)                                                                                                                                                                                                                                                     |
| `<span class="pre">AEGP_RenderReceiptH</span>`                                                                                                                                                                                          | `<span class="pre">AEGP_DisposeRenderReceipt</span>`, from [AEGP_CanvasSuite8](https://ae-plugins.docsforadobe.dev/artisans/artisan-data-types.html#artisans-artisan-data-types-aegp-canvassuite)                                                                                                                                                                                                                                            |
