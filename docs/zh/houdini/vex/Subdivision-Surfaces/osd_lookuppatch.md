---
title: osd_lookuppatch
order: 6
category:
  - houdini
---
    
## 描述

Outputs the OSD patch and UV coordinates corresponding to the given
coordinates on a Houdini polygon face.

`int osd_lookuppatch(<geometry>geometry, int face_id, float face_u, float face_v, int &patch_id, float &patch_u, float &patch_v)`

If you don‘t specify a texture attribute, the function uses intrinsic
polygon interpolants.

如果你不指定一个纹理属性，该函数使用内在的多边形插值。

`int osd_lookuppatch(<geometry>geometry, int face_id, float face_u, float face_v, int &patch_id, float &patch_u, float &patch_v, string attribute)`

If you specify a texture attribute, the function uses the UVs in that
attribute to translate the face coordinates onto the OSD patch.

如果你指定了一个纹理属性，该函数使用该属性中的 UVs 将面的坐标翻译到 OSD 补丁上。

Given the `face_id` and texture coordinates for a point inside the face
(`face_u` and`face_v`), this function will return the corresponding `patch_id`
(Catmull-Clark subdivision face) and the patch interpolants (`patch_u` and
`patch_v`). The reverse function to map from patch to face is
[osd_lookupface](osd_lookupface.html "Outputs the Houdini face and UV
coordinates corresponding to the given coordinates on an OSD patch.").

给出面孔\_id 和面孔内某一点的纹理坐标（face_uandface_v），这个函数将返回相应的 patch_id（Catmull-
Clark 细分面孔）和补丁插值（patch_u 和 patch_v）。从补丁映射到面的反向函数是 osd_lookupface。

`<geometry>`

When running in the context of a node (such as a wrangle SOP), this argument
can be an integer representing the input number (starting at 0) to read the
geometry from.

当在一个节点的上下文中运行时（比如一个 wrangle SOP），这个参数可以是一个整数，代表要读取几何体的输入数字（从 0 开始）。

Alternatively, the argument can be a string specifying a geometry file (for
example, a `.bgeo`) to read from. When running inside Houdini, this can be an

```c
op:/path/to/sop
```

reference.

或者，该参数可以是一个字符串，指定要读取的几何体文件（例如，a.bgeo）。当在 Houdini 内部运行时，这可以是 anop:/path/to/sopreference。

`face_id`

The primitive number of the Houdini polygon face.

Houdini 多边形面的原始编号。

`face_u`, `face_v`

The coordinates in the subdivision patch to map onto a Houdini primitive.These
should have values in the range 0 to 1. Not all values are valid for
triangles.The texture coordinates should be specified according to the
attribute passed in.If you pass invalid coordinates, the function will fail
and return `0`.

细分补丁中的坐标，以映射到胡迪尼的基元上。

`&patch_id`

The function overwrites this variable with the corresponding OSD patch
number.This is also the same integer value used to identify the face when
performing PTex texture mapping.

这些值应该在 0 到 1 的范围内。不是所有的值都对三角形有效。

`&patch_u`, `&patch_v`

The function overwrites these variables with the corresponding U/V coordinates
on the OSD patch.

纹理坐标应根据传入的属性来指定。

Returns

`1` on success or `0` on an error.

如果你传递了无效的坐标，该函数将失败并返回 0。

## Examples

    // This function can be used to move points generated by a scatter SOP to the// subdivision limit surface. The scatter SOP needs to store the "sourceprim"// (the Output Attributes tab). Texture coordinates also need to be// transferred from the source geometry.voidmovePointToLimitSurface(string file; vector P, uv; int sourceprim){  int    patch_id = -1;  float patch_u, patch_v;  if (osd_lookuppatch(file, sourceprim, uv.x, uv.y,      patch_id, patch_u, patch_v, "uv"))  {    vector    tmpP;    if (osd_limitsurface(file, "P", patch_id, patch_u, patch_v, tmpP))      P = tmpP;  }}
