---
title: sample_light
order: 22
category:
  - houdini
---
    
## 描述

Samples a 3D position on a light source and runs the light shader at that
point.

Context(s) | [displace](../contexts/displace.html)[
fog](../contexts/fog.html)[ surface](../contexts/surface.html)  
---|---

`int sample_light(int lightid, vector pos, vector sam, float time, vector &pos, vector &clr, float &scale, ...)`

`lightid`

An integer identifying a light. You can get a list of light IDs for lights
affecting the currently shaded surface with [getlights](getlights.html) "Returns an array of light identifiers for the currently shaded surface.").

一个识别灯光的整数。你可以用 getlights 获取影响当前阴影表面的灯光 ID 列表。

`pos`

The surface point from which lights should be sampled.Area light sources will
attempt to distribute samples by solid angle from the position - that is,
light geometry that is closer to the position will receive more samples.

光线应该从哪个面取样。 区域性光源会尝试从位置上按实体角度分配样本--也就是说，离位置更近的灯光几何会得到更多的样本。

`sam`

A vector of random values, such as those generated by
[nextsample](nextsample.html). Currently only the first 2 components of `sam`
are used.Different values of `sam` translate into different random positions
on the geometry of the light source.

一个随机值的向量，比如由 nextsample 生成的随机值。目前只使用 sam 的前两个分量。 不同的 sam 值在光源的几何体上转化为不同的随机位置。

`time`

Time to shade at.

遮挡的时间。

The function modifies the values of the following arguments:

该函数修改了以下参数的值。

Show/hide arguments

`pos`

The sampled position on the light source.

光源上的采样位置。

`clr`

The light color set by the light shader.

灯光着色器设置的灯光颜色。

`scale`

The light average hemispherical intensity (for area lights).

光的平均半球形强度（对于区域光）。

Returns

A [component bitmask](bouncemask.html) indicating what types of component
bounces the light affects.

组件位掩码，表示灯光影响到哪些类型的组件反弹。

Tip

If you are using [sample_light](sample_light.html "Samples a 3D position on a
light source and runs the light shader at that point.") to generate light
colors, for exampleto reproduce the `Cl` values that would be produced by a
[illuminance](illuminance.html "Loops through all light sources in the scene,
calling the light shader for each light source to set the Cl and L global
variables.")loop, you will need to normalize `clr` to `scale`:

如果你使用 Sample_light 来生成灯光颜色，例如

    clr *= scale / luminance(clr);
